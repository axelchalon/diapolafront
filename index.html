<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <script src="https://unpkg.com/vue"></script>
    <script src="js/prefixfree.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div id="app">
        <div class="topBar">
            <h1 class="logo"></h1>

            <input class="search" type="search" placeholder="Rechercher dans vos présentations" @keyup.enter="search($event.target.value); $event.target.value=''; ">

            <a class="manageCollaborators" href="#"></a>
            <div class="myProfile">
                <a href="#"></a>
                <burger align="right" :items="[{text: 'Mon compte'}, {text: 'Déconnexion'}]"></burger>
            </div>

            <div style="clear: both;"></div>
            <!-- ---- -->
            <div class="topBar_innerSeparator"></div>

            <button class="importPresentation" href="#">Importer une présentation</button>

            <div class="breadcrumbs" v-if="page == 'presentation'">
                <a class="breadcrumbs_breadcrumb" href="#">Mon dossier</a>
                <span class="breadcrumbs_separator">&gt;</span>
                <a class="breadcrumbs_breadcrumb breadcrumbs_breadcrumb-active" href="#" >Nom de la présentation</a>
                <burger align="left" :items="[{text: 'Mots-clés'}, {text: 'Renommer'}, {text: 'Supprimer'}]"></burger>
            </div>
        </div>
        
        <div class="page">
            
            <div class="page_left">
                Arborescence de fichiers ici...
            </div>
            
            <div class="page_right">
                <div class="page_right_topBar page_right_topBar-presentation" v-if="page == 'presentation'">
                    <button class="downloadPresentation">Télécharger la présentation</button>
                    <button class="downloadSelectedSlides downloadSelectedSlides-disabled">Télécharger la sélection</button>

                    <div class="presentationComment">
                        <h3>Commentaire</h3> <a href="#" class="presentationComment-edit">Modifier</a><br>
                        <p>Duis ultrices vestibulum lacus non luctus. Praesent aliquet, justo ut accumsan bibendum, sem erat sagittis nunc, a vulputate diam ulla nisi.</p>
                    </div>
                </div>
                
                <div class="page_right_topBar page_right_topBar-search" v-if="page == 'search'">
                    <h2>{{searchResults.length}} résultats trouvés</h2>
                    
                    <ul>
                        <li :class="{active: searchTab == 'all'}"><a href="#" @click.prevent="searchTab = 'all'">Tout ({{searchResults.length}})</a></li>
                        <li :class="{active: searchTab == 'slides'}"><a href="#" @click.prevent="searchTab = 'slides'">Slides ({{searchResultsSlides.length}})</a></li>
                        <li :class="{active: searchTab == 'presentations'}" @click.prevent="searchTab = 'presentations'"><a href="#">Présentations ({{searchResultsPresentations.length}})</a></li>
                    </ul>
                </div>
                
                <div class="page_right_page">
                    <div v-for="searchResult in (searchTab == 'all' ? searchResults : searchTab == 'slides' ? searchResultsSlides : searchResultsPresentations)" class="page_right_page_slide">
                    </div>
                </div>
                
            </div>
        </div>

        <div class="bottomBar" :class='{"bottomBar-active": bottomBarActive}'>
            <a class="bottomBar_toggler" href="#" @click.prevent="bottomBarActive = !bottomBarActive">^</a>
            <button class="downloadGeneratedPresentation" href="#">Télécharger</button>
            <button class="saveGeneratedPresentation" href="#">Sauvegarder</button>
            <a class="clearGeneratedPresentation" href="#">Tout effacer</a>
            
            <div class="bottomBar_delineator"></div>
            
            <ul class="bottomBar_listOfSlides">
                <li v-for="(generatedPresentationSlide, index) in generatedPresentationSlides" class="bottomBar_listOfSlides_slide">
                    <div class="bottomBar_listOfSlides_slide_image" :style='{"background-image": "url(" + generatedPresentationSlide.previewUrl + ")"}'></div>
                    <p class="bottomBar_listOfSlides_slide_title">{{generatedPresentationSlide.title}}</p>
                    <a class="bottomBar_listOfSlides_slide_remove" href="#" v-on:click.prevent="removeGeneratedPresentationSlide(index)">
                        &times;
                    </a>
                </li>
                
                <li class="bottomBar_listOfSlides_placeholder"></li>
                <li class="bottomBar_listOfSlides_placeholder"></li>
                <li class="bottomBar_listOfSlides_placeholder"></li>
                <li class="bottomBar_listOfSlides_placeholder"></li>
                <li class="bottomBar_listOfSlides_placeholder"></li>
                <li class="bottomBar_listOfSlides_placeholder"></li>
                <li class="bottomBar_listOfSlides_placeholder"></li>
            </ul>
        </div>
    </div>

    <script>
        
        // register
        Vue.component('burger', {
          props: {
              items: Array,
              align: String
          },
          data: function() {
              return {active: false};
          },
          template: `
                <div class="component_burger" v-bind:class='{"component_burger-active": active, "component_burger-alignLeft": align == "left", "component_burger-alignRight": align == "right" }' v-on:click.prevent="active = !active">
                    <a href="#">&sdot; &sdot; &sdot;</a>
                    <ul>
                        <li v-for="item in items"><a href="#">{{item.text}}</a></li>
                    </ul>
                </div>`
        })
        
        var app = new Vue({
            el: '#app',
            data: {
                message: 'Hello Vue!',
                bottomBarActive: true,
                page: "presentation",
                generatedPresentationSlides: [{title: "Nom de la présentation",previewUrl: "https://www.placecage.com/200/130"}],
                searchTab: "all",
                searchResults: []
            },
            computed: {
                searchResultsSlides: function() {
                    return this.searchResults.filter(x => x.type == "slide");
                },
                searchResultsPresentations: function() {
                    return this.searchResults.filter(x => x.type == "presentation");
                }  
            },
            methods: {
                removeGeneratedPresentationSlide: function(index) {
                    this.$delete(this.generatedPresentationSlides, index);
                },
                search: function (q) {
                    this.page = "search";
                    this.searchTab = "all";
                    this.searchResults = [
                        {
                            title: "Slide",
                            type: "slide"
                        },
                        {
                            title: "Slide",
                            type: "slide"
                        },
                        {
                            title: "Slide",
                            type: "slide"
                        },
                        {
                            title: "Presentation",
                            type: "presentation"
                        }
                    ];
                }
            }
        })
    </script>

</body>

</html>